import{j as e,s as a}from"./index-CqNUstVS.js";import{r as t}from"./vendor-DyLareeb.js";import{S as r,I as n}from"./Select-55c2Yli6.js";import{I as s}from"./Input-qnS0jZj0.js";import{B as l}from"./Button-BI2fdoGM.js";const i=({formType:i="csr"})=>{const o=(new Date).getFullYear(),d=Array.from({length:10},((e,a)=>{const t=(o+a).toString();return{value:t,label:t}})),[u,c]=t.useState({name:"",contact:"",companyName:"",companyEmail:"",industryOption:"",industryOther:"",noOfPax:"",duration:"",durationOther:"",eventMonth:"",eventYear:"",budget:"",hrdc:"Yes",location:"",languages:[],languagesOther:"",remarks:""}),[m,p]=t.useState(!1),[g,h]=t.useState(null),[y,x]=t.useState({}),[b,v]=t.useState(!1);t.useEffect((()=>{if(!g)return;const e=setTimeout((()=>h(null)),4e3);return()=>clearTimeout(e)}),[g]);const f=e=>{const{name:a,value:t}=e.target;c((e=>({...e,[a]:t})))};return e.jsxs("div",{className:"bg-white p-6 md:p-10 rounded-[2rem] md:rounded-[2.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.05)] border border-gray-100",children:[e.jsx("h3",{className:"text-2xl md:text-3xl font-black mb-6 md:mb-8",children:"Let's Connect"}),g&&e.jsx("div",{className:"fixed top-10 left-1/2 -translate-x-1/2 z-[100] w-[90%] md:w-auto px-6 py-4 rounded-2xl shadow-2xl border transition-all animate-in fade-in slide-in-from-top-4 "+("success"===g.type?"bg-green-600 text-white border-green-400":"bg-red-600 text-white border-red-400"),children:e.jsx("p",{className:"font-bold text-center",children:g.text})}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),p(!0),h(null);const t={};if(["name","contact","companyName","companyEmail","industryOption","noOfPax","duration","eventMonth","eventYear","budget","location"].filter((e=>!u[e])).length>0||0===u.languages.length||!b)return u.duration||(t.duration="Please select the duration"),0===u.languages.length&&(t.languages="Please select at least one language"),b||(t.privacyConsent="Please agree to the Privacy Policy"),x(t),h({type:"error",text:"Please fill in all required fields"}),void p(!1);try{const e={csr:"csr_inquiries",team_building:"team_building_inquiries",corporate_event:"corporate_event_inquiries"},t=u.languages.filter((e=>"Others"!==e));u.languagesOther.trim()&&t.push(u.languagesOther);const r={name:u.name,contact:u.contact,company_name:u.companyName,company_email:u.companyEmail,industry:"Other"===u.industryOption?u.industryOther:u.industryOption,no_of_pax:parseInt(u.noOfPax),duration:"Others"===u.duration?u.durationOther:u.duration,estimated_event_month:`${u.eventMonth} ${u.eventYear}`,budget:u.budget,hrdc:"Yes"===u.hrdc,preferred_location:u.location,language:t.join(", "),remarks:u.remarks},{error:n}=await a.from(e[i]).insert([r]);if(n)throw n;h({type:"success",text:"Thank you! Your inquiry has been sent."}),c({name:"",contact:"",companyName:"",companyEmail:"",industryOption:"",industryOther:"",noOfPax:"",duration:"",durationOther:"",eventMonth:"",eventYear:"",budget:"",hrdc:"Yes",location:"",languages:[],languagesOther:"",remarks:""}),v(!1)}catch(r){h({type:"error",text:"Database error. Please ensure all fields are valid."})}finally{p(!1)}},className:"space-y-4 md:space-y-5",noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsx(s,{type:"text",name:"name",placeholder:"Name",required:!0,onChange:f,onInvalid:e=>e.currentTarget.setCustomValidity("Please enter your name"),onInput:e=>e.currentTarget.setCustomValidity(""),value:u.name,disabled:m})}),e.jsx("div",{children:e.jsx(s,{type:"text",name:"contact",placeholder:"Contact Number",required:!0,onChange:f,onInvalid:e=>e.currentTarget.setCustomValidity("Please enter your contact number"),onInput:e=>e.currentTarget.setCustomValidity(""),value:u.contact,disabled:m,min:0,step:1})})]}),e.jsx("div",{children:e.jsx(s,{type:"text",name:"companyName",placeholder:"Company Name",required:!0,onChange:f,onInvalid:e=>e.currentTarget.setCustomValidity("Please enter your company name"),onInput:e=>e.currentTarget.setCustomValidity(""),value:u.companyName,disabled:m})}),e.jsx("div",{children:e.jsx(s,{type:"email",name:"companyEmail",placeholder:"Company Email",required:!0,onChange:f,onInvalid:e=>{e.currentTarget.validity.valueMissing?e.currentTarget.setCustomValidity("Please enter your company email"):e.currentTarget.validity.typeMismatch&&e.currentTarget.setCustomValidity("Please enter a valid email address")},onInput:e=>e.currentTarget.setCustomValidity(""),value:u.companyEmail,disabled:m})}),e.jsx("div",{children:e.jsx(r,{name:"industryOption",className:"text-base",value:u.industryOption,onChange:e=>c((a=>({...a,industryOption:e}))),options:n.map((e=>({value:e,label:e}))),placeholder:"Select Industry",searchable:!0,disabled:m})}),"Other"===u.industryOption&&e.jsx("div",{children:e.jsx(s,{type:"text",name:"industryOther",placeholder:"Please specify your industry",required:!0,onChange:f,onInvalid:e=>e.currentTarget.setCustomValidity("Please specify your industry"),onInput:e=>e.currentTarget.setCustomValidity(""),value:u.industryOther,disabled:m})}),e.jsx("div",{children:e.jsx(s,{type:"number",name:"noOfPax",placeholder:"No of pax",required:!0,onChange:f,onInvalid:e=>e.currentTarget.setCustomValidity("Please enter the number of participants"),onInput:e=>e.currentTarget.setCustomValidity(""),value:u.noOfPax,disabled:m,min:0,step:1})}),e.jsxs("div",{className:"py-2",children:[e.jsxs("label",{className:"block mb-3 font-bold text-gray-700",children:["Duration: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex flex-wrap gap-4",children:["Half day","Full day","2D1N","3D2N","Others"].map((a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(s,{type:"radio",name:"duration",value:a,onChange:e=>{f(e),x((e=>({...e,duration:void 0})))},checked:u.duration===a,disabled:m}),e.jsx("span",{className:"text-sm text-gray-600",children:a})]},a)))}),y.duration&&e.jsx("p",{className:"mt-2 text-sm font-medium text-red-600",children:y.duration})]}),"Others"===u.duration&&e.jsx("div",{children:e.jsx(s,{type:"text",name:"durationOther",placeholder:"Please specify duration",required:!0,onChange:f,onInvalid:e=>e.currentTarget.setCustomValidity("Please specify the duration"),onInput:e=>e.currentTarget.setCustomValidity(""),value:u.durationOther,disabled:m})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(r,{name:"eventMonth",value:u.eventMonth,onChange:e=>c((a=>({...a,eventMonth:e}))),options:[{value:"January",label:"January"},{value:"February",label:"February"},{value:"March",label:"March"},{value:"April",label:"April"},{value:"May",label:"May"},{value:"June",label:"June"},{value:"July",label:"July"},{value:"August",label:"August"},{value:"September",label:"September"},{value:"October",label:"October"},{value:"November",label:"November"},{value:"December",label:"December"}],placeholder:"Month",disabled:m}),e.jsx(r,{name:"eventYear",value:u.eventYear,onChange:e=>c((a=>({...a,eventYear:e}))),options:d,placeholder:"Year",disabled:m})]}),e.jsx("div",{children:e.jsx(s,{type:"number",name:"budget",placeholder:"Budget (RM)",required:!0,onChange:f,onInvalid:e=>e.currentTarget.setCustomValidity("Please enter your budget"),onInput:e=>e.currentTarget.setCustomValidity(""),value:u.budget,disabled:m})})]}),e.jsxs("div",{className:"flex gap-10 items-center py-2",children:[e.jsx("label",{className:"font-bold text-gray-700",children:"HRDC Claimable?"}),e.jsx("div",{className:"flex gap-4",children:["Yes","No"].map((a=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(s,{type:"radio",name:"hrdc",value:a,checked:u.hrdc===a,onChange:f,disabled:m}),e.jsx("span",{className:"text-gray-600",children:a})]},a)))})]}),e.jsx("div",{children:e.jsx(s,{type:"text",name:"location",placeholder:"Preferred Location",required:!0,onChange:f,onInvalid:e=>e.currentTarget.setCustomValidity("Please enter your preferred location"),onInput:e=>e.currentTarget.setCustomValidity(""),value:u.location,disabled:m})}),e.jsxs("div",{className:"py-2",children:[e.jsxs("label",{className:"block mb-3 font-bold text-gray-700",children:["Language to Conduct: ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex flex-wrap gap-6",children:["English","Mandarin","BM","Others"].map(((a,t)=>e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:u.languages.includes(a),onChange:()=>(e=>{c((a=>{const t=a.languages.includes(e);return{...a,languages:t?a.languages.filter((a=>a!==e)):[...a.languages,e]}})),x((e=>({...e,languages:void 0})))})(a),disabled:m,className:"h-4 w-4 rounded border-gray-300 text-[#f68921] focus:ring-[#f68921] cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-600",children:a})]},a)))}),y.languages&&e.jsx("p",{className:"mt-2 text-sm font-medium text-red-600",children:y.languages})]}),u.languages.includes("Others")&&e.jsx("div",{children:e.jsx(s,{type:"text",name:"languagesOther",placeholder:"Please specify other language",required:!0,onChange:f,onInvalid:e=>e.currentTarget.setCustomValidity("Please specify the other language"),onInput:e=>e.currentTarget.setCustomValidity(""),value:u.languagesOther,disabled:m})}),e.jsx("div",{children:e.jsx("textarea",{name:"remarks",rows:3,placeholder:"Additional Remarks (Optional)",onChange:f,value:u.remarks,disabled:m,className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})}),e.jsxs("div",{className:"py-2",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:()=>{v(!b),x((e=>({...e,privacyConsent:void 0})))},disabled:m,className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#f68921] focus:ring-[#f68921] cursor-pointer"}),e.jsxs("span",{className:"text-sm text-gray-600 leading-relaxed",children:["By submitting this form, I agree to the processing of my personal data as per the"," ",e.jsx("a",{href:"/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"text-[#4a90e2] hover:text-[#f68921] underline font-medium",children:"Privacy Policy"}),"."]})]}),y.privacyConsent&&e.jsx("p",{className:"mt-2 text-sm font-medium text-red-600",children:y.privacyConsent})]}),e.jsx(l,{type:"submit",disabled:m,loading:m,fullWidth:!0,className:"py-4 md:py-5 bg-[#fcb22f] text-white font-black text-lg md:text-xl rounded-2xl hover:shadow-xl hover:-translate-y-1 transition-all duration-300",children:m?"Submitting...":"Submit Inquiry"})]})]})};export{i as Q};
